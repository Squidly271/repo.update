Menu="Docker:4"
Title="Community Applications"
Cond="(pgrep('docker')!==false)"
---
<?
$plugin = "community.repositories";
$waiting = "<tr><td colspan='5'><br><center><i class='fa fa-spinner fa-spin'></i>&nbsp;<em>Please wait... retrieving container's information!</em></center></td></tr>";
$line_color = $display['theme']=='black' ? '#202020' : '#E8E8E8';
?>
<style>
.searchSubmit{font-family:'FontAwesome';width:29px;height:26px;border:1px solid #dadada;border-radius:0px 4px 4px 0px;font-size:11px;position:relative;padding:0px 2px;background:#DADADA;border:none;cursor:pointer;}
table#templates_list tbody td.topRow{border-top:1px solid <?=$line_color?>;}
</style>
<script>
var URL = "/plugins/<?=$plugin?>/include/exec.php";
var last = $('input[name$="tabs"]').length;
$(function(){
<?if ($tabbed):?>
  $('.tabs').append("<span id='searchFilter' class='status vhshift' style='display:none'><input type='text' id='searchBox' class='narrow' placeholder='Search' style='margin-left:10px;margin-right:0'><button class='searchSubmit' style='margin-right:10px' onclick='doSearch(true)'><i id='searchButton' class='fa fa-search fa-lg'></i></button><input type='button' value='Update Repositories' onclick='forceUpdate()'></span>");
  for (var x=1; x<last; x++) $('#tab'+x).bind({click:function(){$('#searchFilter').hide();}});
  $('#tab'+last).bind({click:function(){$('#searchFilter').show();readMore();}});
<?else:?>
  $('div[id=title]').last().append("<span id='searchFilter' class='status vhshift'><input type='text' id='searchBox' class='narrow' placeholder='Search' style='margin-left:10px;margin-right:0'><button class='searchSubmit' style='margin-right:10px' onclick='doSearch(true)'><i id='searchButton' class='fa fa-search fa-lg'></i></button><input type='button' value='Update Repositories' onclick='forceUpdate()'>");
<?endif;?>
  getContent(true,'','All Containers');
  document.getElementById("Category").innerHTML = "All Containers";
  $('#searchBox').keyup(function(e) {if(e.which == 13){doSearch(false);}});
});

function readMore() {
  $('.desc_readmore').readmore({maxHeight:50});
}


function doSearch(button) {
  var filter = $('#searchBox').val();
  if ($('#searchButton').hasClass('fa-search')) {
    if (filter) { $('#searchButton').toggleClass('fa-search fa-remove'); $('.help1,#openclose').hide(); }
  } else if (button) {
    if ($('#searchButton').hasClass('fa-remove')) { $('#searchButton').toggleClass('fa-remove fa-search'); $('.help1,#openclose').show(); }
    filter = '';
    $('#searchBox').val('');
  } else if (!filter) return;
  $('#BackToTop').hide();
  document.getElementById("Category").innerHTML="All Containers (Search Results)";
  document.getElementById("NetworkCategory").hidden = true;
  document.getElementById("MediaAppCategory").hidden = true;
  document.getElementById("MediaServerCategory").hidden = true;
  document.getElementById("MainCategory").hidden = false;
  $.post(URL,{action:'get_content',filter:filter},function(data) {
    if (data) $('#templates_content').html(data);
    $('#templates_list').trigger('update',true);
    readMore();
    if (!filter && $('#openclose').val()=='Show') $('#templates_list .expand-child td').hide();
    $('#BackToTop').show();
  });
}

function forceUpdate() {
  $('#templates_content').html("<?=$waiting?>");
  document.getElementById("Total").innerHTML = "Updating...";
  if ($('#searchButton').hasClass('fa-remove')) { $('#searchButton').toggleClass('fa-remove fa-search'); $('#searchBox').val(''); $('.help1,#openclose').show(); }
  $.post(URL,{action:'force_update'},function(){getContent(false,'',"All Containers");});
}

function getContent(init,category,description) {
  document.getElementById("Total").innerHTML = "Searching...";

  switch (category) {
    case 'network:':
      document.getElementById("MainCategory").hidden = true;
      document.getElementById("NetworkCategory").hidden = false;
      document.getElementById("Uncategorized").hidden = true;
      document.getElementById("All").value = "All Categories";
      break;
    case 'MediaApp:':
      document.getElementById("MainCategory").hidden = true;
      document.getElementById("MediaAppCategory").hidden = false;
      document.getElementById("Uncategorized").hidden = true;
      document.getElementById("All").value = "All Categories";
      break;
    case 'MediaServer:':
      document.getElementById("MainCategory").hidden = true;
      document.getElementById("MediaServerCategory").hidden = false;
      document.getElementById("Uncategorized").hidden = true;
      document.getElementById("All").value = "All Categories";
      break;
    case 'UNCATEGORIZED':
      document.getElementById("Category").innerHTML = "Uncategorized Containers";
      document.getElementById("NetworkCategory").hidden = true;
      document.getElementById("MainCategory").hidden = false;
      break;
    case '':
      document.getElementById("NetworkCategory").hidden = true;
      document.getElementById("MediaAppCategory").hidden = true;
      document.getElementById("MediaServerCategory").hidden = true;
      document.getElementById("MainCategory").hidden = false;
      document.getElementById("Uncategorized").hidden = false;
      document.getElementById("All").value = "All Containers";
  }
  document.getElementById("Category").innerHTML = "";
      
  $('#BackToTop').hide();
  $.post(URL,{action:'get_content',category:category},function(data) {
    if (data) $('#templates_content').html(data);
    if (init) {
      $('#templates_list').tablesorter({sortList:[[1,0]],headers:{0:{sorter:false},4:{sorter:false}}});
    } else {
      $('#templates_list').trigger('update',true);
    }
    document.getElementById("Category").innerHTML = description;
    readMore();
    $('#BackToTop').show();
    if (init) {
      $('#templates_list').on('click','.toggle',function() {
        $(this).closest('tr').nextUntil('tr:not(.expand-child)').find('td').toggle();
        return false;
      });
    }
 });
}

</script>
> <span class='help1'>Click on the <strong>name</strong> of the repository to show / hide all of the available containers within this repository.</span>
>
> <span class='help1'>Click on <img src='/plugins/community.repositories/images/green.png' width=25> to add a repository to the list of templates or <img src='/plugins/community.repositories/images/red.png' width=25> to remove a repository from the list of templates.</span>
>
> Click on the <strong>icon</strong> of the container to add the single container (a new window will open).
>
> Click <input type='button' value='Update Repositories' style='margin:0 2px' onclick='forceUpdate()'> to force an update of all repositories and containers.
>
> <span class='help1'>
> <span class='help2'>Click <input type='button' value='Show' style='margin:0 2px' onclick='openClose(this.value)'> to display all available containers within the repositories.</span>
> <span class='help2' style='display:none'>Click <input type='button' value='Hide' style='margin:0 2px' onclick='openClose(this.value)'> to only display the first container within a repository.</span>
> </span>
>
> <span class='help3'>Select the <input type='checkbox' class='selectBeta' onchange='toggleBeta(this.checked)'><strong>Include Beta</strong> check box to include Beta Repositories in the main list / searches.</span>
> <span class='help3' style='display:none'>Deselect the <input type='checkbox' class='selectBeta' checked onchange='toggleBeta(this.checked)'><strong>Include Beta</strong> check box to exclude Beta Repositories from the main list / searches.</span>
> <br>

<span id='MainCategory'>
<input type=button value='Backup' onclick='getContent(false,"backup:","Backup");'></input>
<input type=button value='Cloud' onclick='getContent(false,"cloud:","Cloud");'></input>
<input type=button value='Downloaders' onclick='getContent(false,"downloaders:","Downloaders");'></input>
<input type=button value='Home Automation' onclick='getContent(false,"HomeAutomation:","Home Automation");'></input>
<input type=button value='Network Services' onclick='getContent(false,"network:","Network Services");'></input>
<input type=button value='Media Applications' onclick='getContent(false,"MediaApp:","Media Applications");'></input>
<input type=button value='Media Servers' onclick='getContent(false,"MediaServer:","Media Servers");'></input>
<input type=button value='Productivity' onclick='getContent(false,"productivity:","Productivity");'></input>
<input type=button value='Tools / Utilities' onclick='getContent(false,"tools:","Tools / Utilities");'></input>
<input type=button value='Other' onclick='getContent(false,"other:","Other");'></input>
</span>
<span id='NetworkCategory' hidden>
<input type=button value='Web Servers' onclick='getContent(false,"network:web","Network Services: Web Servers");'></input>
<input type=button value='DNS Servers' onclick='getContent(false,"network:dns","Network Services: DNS Servers");'></input>
<input type=button value='FTP Clients / Servers' onclick='getContent(false,"network:ftp","Network Services: FTP Clients / Servers");'></input>
<input type=button value='Proxies' onclick='getContent(false,"network:proxy","Network Services: Proxies");'></input>
<input type=button value='VOIP' onclick='getContent(false,"network:voip", "Network Services: VOIP");'></input>
<input type=button value='Management / Analyzer' onclick='getContent(false,"network:management","Network Services: Management / Analyzer");'></input>
<input type=button value='Other' onclick='getContent(false,"network:other","Network Services: Other");'></input>
<input type=button value='All Network Services' onclick='getContent(false,"network:","Network Services");'></input>
</span>
<span id='MediaAppCategory' hidden>
<input type=button value='Video' onclick='getContent(false,"MediaApp:Video","Media Applications: Video");'></input>
<input type=button value='Music' onclick='getContent(false,"MediaApp:Music","Media Applications: Music");'></input>
<input type=button value='Books / Comics' onclick='getContent(false,"MediaApp:Books","Media Applications: Books / Comics");'></input>
<input type=button value='Photos' onclick='getContent(false,"MediaApp:Photos","Media Applications: Photos");'></input>
<input type=button value='Other' onclick='getContent(false,"MediaApp:other","Media Applications: Other");'></input>
<input type=button value='All Media Applications' onclick='getContent(false,"MediaApp:","Media Applications");'></input>
</span>
<span id='MediaServerCategory' hidden>
<input type=button value='Video' onclick='getContent(false,"MediaServer:Video","Media Servers: Video");'></input>
<input type=button value='Music' onclick='getContent(false,"MediaServer:Music","Media Servers: Music");'></input>
<input type=button value='Books / Comics' onclick='getContent(false,"MediaServer:Books","Media Servers: Books / Comics");'></input>
<input type=button value='Photos' onclick='getContent(false,"MediaServer:Photos","Media Servers: Photos");'></input>
<input type=button value='Other' onclick='getContent(false,"MediaServer:other","Media Servers: Other");'></input>
<input type=button value='All Media Server' onclick='getContent(false,"MediaServer:","Media Servers");'></input>
</span>
<input type=button id="Uncategorized" style='float: right'; value='Uncategorized' onclick='getContent(false,"UNCATEGORIZED","All Uncategorized Containers");'></input>
<input type=button id="All" style='float: right'; value='All Containers' onclick='getContent(false,"","All Containers");'></input>

Current Category: <strong><font size="3"><span id="Category">All Containers</span></font></strong><span style='float: right';>Total Found: <strong><font size="3"><span id="Total"></span></font></strong></span>
<table id='templates_list' class='tablesorter <?=$shift?>'>
<thead><th></th><th>Container</th><th style='width:40px'>Status</th><th>Author</th><th>Description</th><th>Category</th><th>Repository</th></tr></thead>
<tbody id='templates_content'><?=$waiting?></tbody>
</table>
<a href="#" id="BackToTop" onclick="var top=<?if ($tabbed):?>0<?else:?>$('div[id=title]').last().offset().top<?endif;?>;$('html,body').animate({scrollTop:top},'slow')">Back To Top</a>
