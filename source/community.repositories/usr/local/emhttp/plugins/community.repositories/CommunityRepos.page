Menu="Docker:4"
Title="Community Repositories"
Cond="(pgrep('docker')!==false)"
---
<?
$plugin = "community.repositories";
$waiting = "<tr><td colspan='5'><br><center><i class='fa fa-spinner fa-spin'></i>&nbsp;<em>Please wait... retrieving repositories information!</em></center></td></tr>";
$line_color = $display['theme']=='black' ? '#202020' : '#E8E8E8';
?>
<style>
.searchSubmit{font-family:'FontAwesome';width:29px;height:26px;border:1px solid #dadada;border-radius:0px 4px 4px 0px;font-size:11px;position:relative;padding:0px 2px;background:#DADADA;border:none;cursor:pointer;}
table#templates_list tbody td.topRow{border-top:1px solid <?=$line_color?>;}
</style>
<script>
var URL = "/plugins/<?=$plugin?>/include/exec.php";
var imgRed = {src:"/plugins/<?=$plugin?>/images/red.png",title:'Click to remove container'};
var imgGreen = {src:"/plugins/<?=$plugin?>/images/green.png",title:'Click to add container'};
var last = $('input[name$="tabs"]').length;
$(function(){
<?if ($tabbed):?>
<?$shift = 'shift2';?>
  $('.tabs').append("<span id='searchFilter' class='status vhshift' style='display:none'><input type='text' id='searchBox' class='narrow' placeholder='Search' style='margin-left:10px;margin-right:0'><button class='searchSubmit' style='margin-right:10px' onclick='doSearch(true)'><i id='searchButton' class='fa fa-search fa-lg'></i></button><input type='button' value='Update Repositories' onclick='forceUpdate()'></span>");
  for (var x=1; x<last; x++) $('#tab'+x).bind({click:function(){$('#searchFilter').hide();}});
  $('#tab'+last).bind({click:function(){$('#searchFilter').show();readMore();}});
<?else:?>
<?$shift = 'shift';?>
  $('div[id=title]').last().append("<span id='searchFilter' class='status vhshift'><input type='text' id='searchBox' class='narrow' placeholder='Search' style='margin-left:10px;margin-right:0'><button class='searchSubmit' style='margin-right:10px' onclick='doSearch(true)'><i id='searchButton' class='fa fa-search fa-lg'></i></button><input type='button' value='Update Repositories' onclick='forceUpdate()'>");
<?endif;?>
  getContent(true);
  $('#searchBox').keyup(function(e) {if(e.which == 13){doSearch(false);}});
});

function readMore() {
  $('.desc_readmore').readmore({maxHeight:50});
}


function doSearch(button) {
  var filter = $('#searchBox').val();
  if ($('#searchButton').hasClass('fa-search')) {
    if (filter) { $('#searchButton').toggleClass('fa-search fa-remove'); $('.help1,#openclose').hide(); }
  } else if (button) {
    if ($('#searchButton').hasClass('fa-remove')) { $('#searchButton').toggleClass('fa-remove fa-search'); $('.help1,#openclose').show(); }
    filter = '';
    $('#searchBox').val('');
  } else if (!filter) return;
  $('#BackToTop').hide();
  document.getElementById("Category").innerHTML="All Containers (Search Results)";
  $.post(URL,{action:'get_content',filter:filter},function(data) {
    if (data) $('#templates_content').html(data);
    $('#templates_list').trigger('update',true);
    readMore();
    if (!filter && $('#openclose').val()=='Show') $('#templates_list .expand-child td').hide();
    $('#BackToTop').show();
  });
}

function forceUpdate() {
  $('#templates_content').html("<?=$waiting?>");
  if ($('#searchButton').hasClass('fa-remove')) { $('#searchButton').toggleClass('fa-remove fa-search'); $('#searchBox').val(''); $('.help1,#openclose').show(); }
  $.post(URL,{action:'force_update'},function(){getContent(false);});
}

function getContent(init,category) {
  switch (category) {
    case 'backup:':
      document.getElementById("Category").innerHTML = "Backup";
      break;
    case 'cloud:':
      document.getElementById("Category").innerHTML = "Cloud";
      break;
    case 'downloaders:':
      document.getElementById("Category").innerHTML = "Downloaders";
      break;
    case 'HomeAutomation:':
      document.getElementById("Category").innerHTML = "Home Automation";
      break;
    case 'network:':
      document.getElementById("Category").innerHTML = "Network Services";
      break;
    case 'MediaApp:':
      document.getElementById("Category").innerHTML = "Media Applications";
      break;
    case 'MediaServer:':
      document.getElementById("Category").innerHTML = "Media Server";
      break;
    case 'other:':
      document.getElementById("Category").innerHTML = "Other";
      break;
    case 'productivity:':
      document.getElementById("Category").innerHTML = "Productivity";
      break;
    case 'tools:':
      document.getElementById("Category").innerHTML = "Tools / Utilities";
      break;
    case 'UNCATEGORIZED':
      document.getElementById("Category").innerHTML = "Uncategorized Containers";
      break;
    default:
      document.getElementById("Category").innerHTML = "All Containers";
}
      



  $('#BackToTop').hide();
  $.post(URL,{action:'get_content',category:category},function(data) {
    if (data) $('#templates_content').html(data);
    if (init) {
      $('#templates_list').tablesorter({sortList:[[0,0]],headers:{0:{sorter:false},4:{sorter:false}}});
    } else {
      $('#templates_list').trigger('update',true);
    }
    readMore();
    $('#BackToTop').show();
    if (init) {
      $('#templates_list').on('click','.toggle',function() {
        $(this).closest('tr').nextUntil('tr:not(.expand-child)').find('td').toggle();
        return false;
      });
    }
  });
}

</script>

> <span class='help1'>Click on the <strong>name</strong> of the repository to show / hide all of the available containers within this repository.</span>
>
> <span class='help1'>Click on <img src='/plugins/community.repositories/images/green.png' width=25> to add a repository to the list of templates or <img src='/plugins/community.repositories/images/red.png' width=25> to remove a repository from the list of templates.</span>
>
> Click on the <strong>icon</strong> of the container to add the single container (a new window will open).
>
> Click <input type='button' value='Update Repositories' style='margin:0 2px' onclick='forceUpdate()'> to force an update of all repositories and containers.
>
> <span class='help1'>
> <span class='help2'>Click <input type='button' value='Show' style='margin:0 2px' onclick='openClose(this.value)'> to display all available containers within the repositories.</span>
> <span class='help2' style='display:none'>Click <input type='button' value='Hide' style='margin:0 2px' onclick='openClose(this.value)'> to only display the first container within a repository.</span>
> </span>
>
> <span class='help3'>Select the <input type='checkbox' class='selectBeta' onchange='toggleBeta(this.checked)'><strong>Include Beta</strong> check box to include Beta Repositories in the main list / searches.</span>
> <span class='help3' style='display:none'>Deselect the <input type='checkbox' class='selectBeta' checked onchange='toggleBeta(this.checked)'><strong>Include Beta</strong> check box to exclude Beta Repositories from the main list / searches.</span>
> <br><br>

<input type=button value='Backup' onclick='getContent(false,"backup:");'></input>
<input type=button value='Cloud' onclick='getContent(false,"cloud:");'></input>
<input type=button value='Downloaders' onclick='getContent(false,"downloaders:");'></input>
<input type=button value='Home Automation' onclick='getContent(false,"HomeAutomation:");'></input>
<input type=button value='Network Services' onclick='getContent(false,"network:");'></input>
<input type=button value='Media Applications' onclick='getContent(false,"MediaApp:");'></input>
<input type=button value='Media Servers' onclick='getContent(false,"MediaServer:");'></input>
<input type=button value='Productivity' onclick='getContent(false,"productivity:");'></input>
<input type=button value='Tools / Utilities' onclick='getContent(false,"tools:");'></input>
<input type=button value='Other' onclick='getContent(false,"other:");'></input>
<input type=button style='float: right'; value='Uncategorized' onclick='getContent(false,"UNCATEGORIZED");'></input>
<input type=button style='float: right'; value='All Containers' onclick='getContent(false,"");'></input>

Current Category: <strong><font size="3"><span id="Category">All Containers</span></font></strong><br><br><br>
<table id='templates_list' class='tablesorter <?=$shift?>'>
<thead><th></th><th>Container</th><th style='width:40px'>Status</th><th>Author</th><th>Description</th><th>Category</th><th>Repository</th></tr></thead>
<tbody id='templates_content'><?=$waiting?></tbody>
</table>
<a href="#" id="BackToTop" onclick="var top=<?if ($tabbed):?>0<?else:?>$('div[id=title]').last().offset().top<?endif;?>;$('html,body').animate({scrollTop:top},'slow')">Back To Top</a>
